{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QidpLogout defaults to false, but we want users to log out of the Auth0 tenant.\\E$"}
{"rule":"UPPERCASE_SENTENCE_START","sentence":"^\\Qexpress-openid-connect is built as a CommonJS module so, we have to destructure it into the components that we need with this statement.\\E$"}
{"rule":"MISSING_GENITIVE","sentence":"^\\QNodeJS packages are downloaded and installed to the node_modules folder in the project.\\E$"}
{"rule":"COMMA_COMPOUND_SENTENCE","sentence":"^\\QIt really does not matter what the value is, just that we externalize it so we can randomly change the value whenever we want.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QNOTE: we left the lines in the configuration as comments for issuerBaseURL, baseURL, client ID, and secret (the session cookie secret).\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QNOTE: we left the lines in the configuration as comments for issuerBaseURL, baseURL, clientID, and secret (the session cookie secret).\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QclientSecret is not automatically read but necessary for Authorization Code flow.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QThe function is generated by calling the auth function from the express-openid-connect sdk.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QRetrieving the values from the .env file is handled by calling config from the dotenv module, so add this statement after deconstructing auth0Express:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QExpress is similar to Flask or FastAPI in Python, Spring in Java, or Kestrel (part of ASP.NET Core) in .NET.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAlong the way the features of the Auth0 express-openid-connect SDK will be explored; the basic functionality of Auth0 Web Application SDKs is similar across all the platforms.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QSet the AUDIENCE to the audience we defined for the API: HTTP​://acme-fm-backend-api, and save the .env file.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QIn the server.js file add an import statement to get the SDK for verifying Auth0 access tokens: auth is the function that will build the express middleware from the configuration, and RequiredScopes is added to the endpoint middleware to set which scopes are necessary for that endpoint.\\E$"}
{"rule":"LC_AFTER_PERIOD","sentence":"^\\QAfter that call to app.get register the Auth0 middleware to require the access token by inserting this code:\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QFind the endpoint for the landing page, app.get('/'...\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the totals endpoint beginning with app.get('/:userid/totals'...\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QDo the same for the reports endpoint beginning with app.get('/:userid/reports'..., except the scope is read:reports:\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QDo the same for the /reports endpoint beginning with app.get('/:userid/reports'..., except the scope is read:reports:\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the configuration for the Auth0 client that is registered as the Express middleware: app.use(auth({...\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the configuration for the Auth0 client that is registered as the Express middleware: app.use(auth({...\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd the following audience line to the existing authorizationParams section to request a grant for an access token for the backend API:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd this line to the authorizationParams* section to include the required scopes; openid, profile, and email must be included to get the ID token properly:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd this line to the authorizationParams* section to include the required scopes; openid, profile, and email must be included to get the ID token properly:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QDo the same for the /reports endpoint beginning with app.get('/:userid/reports'..., except the scope is read:reports:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the /totals endpoint beginning with app.get('/:userid/totals'...\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QNote the middleware provides an object named accessToken containing the expiration date, etc. that itself has the real access token as the access_token property.\\E$"}
{"rule":"POSSESSIVE_APOSTROPHE","sentence":"^\\QCheck the Expenses page to make sure the API is called to get the expenses.\\E$"}
{"rule":"AFFORD_VB","sentence":"^\\QUnder RBAC Settings choose Enable RBAC and Add Permissions in the Access Token:\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the /totals endpoint beginning with app.get('/:userid/totals'...\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the /totals endpoint beginning with app.get('/:userid/totals'...\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd the RequiredScopes call to register the middleware that rejects the request if the token does not have the read:totals scope:\\E$"}
{"rule":"ENGLISH_WORD_REPEAT_RULE","sentence":"^\\QScroll down to RBAC Settings enable Enable RBAC and Add Permissions in the Access Token.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QSet the AUDIENCE to the audience we defined in Auth0 for the API: HTTP​://acme-fm-backend-api.\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QFind the endpoint registration for the landing page that starts with app.get('/'....\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the /totals endpoint beginning with app.get('/:userid/totals'...:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QChange the opening line of the registration by adding RequiredScopes(), as the second argument to app.get:\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QDo the same for the /reports endpoint beginning with app.get('/:userid/reports'...:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAlternatively you could use the current terminal window and issue a cd ../Acme command.\\E$"}
{"rule":"DOUBLE_PUNCTUATION","sentence":"^\\QAlternatively you could use the current terminal window and issue a cd ../Acme command.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QSet the BACKEND_AUDIENCE to the audience we defined for the API: \"http​://acme-fm-backend-api\".\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QSet the BACKEND_AUDIENCE to the audience we defined for the API: \"http​://acme-fm-backend-api\".\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QSet the BACKEND_URL to the local URL the API will listen on: \"http​://localhost:38500\".\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd the following audience line to the existing authorizationParams section.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd this second line to the authorizationParams* section to include the required scopes; openid, profile, and email must be included to get the ID token properly:\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QAdd this second line to the authorizationParams* section to include the required scopes; openid, profile, and email must be included to get the ID token properly:\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the middleware registration that beings with app.get(\"/\", async (req, res) => {, the one we were just looking at above.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the middleware registration that beings with app.get(\"/\", async (req, res) => {, the one we were just looking at above.\\E$"}
{"rule":"ARROWS","sentence":"^\\QLocate the middleware registration that beings with app.get(\"/\", async (req, res) => {, the one we were just looking at above.\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the middleware registration that beings with app.get(\"/\", async (req, res) => {, the one we were just looking at above.\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"ARROWS","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QClose the jwt.io tab in the browser.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QClose the jwt.io tab in the browser.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"ARROWS","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QClose the jwt.io tab in the browser.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QClose the jwt.io tab in the browser.\\E$"}
{"rule":"EN_UNPAIRED_BRACKETS","sentence":"^\\QLocate the registration for the /expenses endpoint: app.get(\"/expenses\", requiresAuth(), async (req, res, next) => {.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QFor SPAs this is not so secure; the code verifier has to be held in browser local storage while the user goes to other pages in the flow.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QFor DPoP applications DPoP is uses a signature We are not going to implement DPoP\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QFor DPoP applications DPoP is uses a signature We are not going to implement DPoP\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QThe goal is the add a page to the front-end application that retrieves the full user profile from the management API, and offers a checkbox that changes the value of the user app_metadata.optin_mfa property at Auth0.\\E$"}
{"rule":"UPPERCASE_SENTENCE_START","sentence":"^\\Qapp_metadata may not be altered with user privileges, it must be handled with an M2M client.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QThe clientAccessTokens property referenced by the method must be created in the constructor, so add this statement to the constructor:\\E$"}
{"rule":"EN_COMPOUNDS","sentence":"^\\QSecond, get the authenticated user ID token to retrieve the sub claim, the user ID at Auth0.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QEverything worked up to this point, but there will be an issue if the getClientAccessToken is used at the top level of server.js before the main thread is released.\\E$"}
{"rule":"A_INFINITIVE","sentence":"^\\QThe await makes sure the issuer has been set in the TokenManager before the program continues.\\E$"}
{"rule":"MORFOLOGIK_RULE_EN_US","sentence":"^\\QNow if getClientToken is used at the top-level of the program the issuer it needs is available.\\E$"}
